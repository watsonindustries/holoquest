import{s as L,a as U,n as Y,r as z,c as D,o as H,i as M,b as $}from"../chunks/scheduler.CJVYrxIg.js";import{S as j,i as F,e as f,s as k,c as _,g,b as v,f as G,d as x,l as r,n as S,m as d,r as q,o as B,u as V}from"../chunks/index.BQ69NQ52.js";import{f as A}from"../chunks/const.CMVshlAV.js";import{s as J}from"../chunks/client.DNB36mQv.js";import{s as b,n as w}from"../chunks/store.CAuuRsX2.js";import{T as C}from"../chunks/custom.DgUHssZa.js";function K(a){let s,h="Profile",o,c,e,i,y="Nickname",m,t,N,u,O="Set nickname",T,p,P="Your nickname is used to identify you in the leaderboards and realtime events.",E,R,I;return{c(){s=f("h1"),s.textContent=h,c=k(),e=f("div"),i=f("label"),i.textContent=y,m=k(),t=f("input"),N=k(),u=f("button"),u.textContent=O,T=k(),p=f("p"),p.textContent=P,this.h()},l(l){s=_(l,"H1",{class:!0,"data-svelte-h":!0}),g(s)!=="svelte-zwrkr8"&&(s.textContent=h),c=v(l),e=_(l,"DIV",{class:!0});var n=G(e);i=_(n,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),g(i)!=="svelte-1qg61em"&&(i.textContent=y),m=v(n),t=_(n,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),N=v(n),u=_(n,"BUTTON",{class:!0,"data-svelte-h":!0}),g(u)!=="svelte-134mnq4"&&(u.textContent=O),T=v(n),p=_(n,"P",{"data-svelte-h":!0}),g(p)!=="svelte-1sy1pg1"&&(p.textContent=P),n.forEach(x),this.h()},h(){r(s,"class","mx-4 my-4 font-geologica text-4xl font-bold text-primary"),r(i,"class","font-geologica text-xl font-bold text-secondary"),r(i,"for","nickname"),r(t,"type","text"),r(t,"id","nickname"),r(t,"name","nickname"),r(t,"placeholder","E.g. smol_ame"),r(t,"class","input-bordered input-secondary input w-full max-w-xs"),r(u,"class","btn-secondary btn rounded-full"),r(e,"class","mx-4 my-4 space-y-4")},m(l,n){S(l,s,n),S(l,c,n),S(l,e,n),d(e,i),d(e,m),d(e,t),q(t,a[1]),d(e,N),d(e,u),d(e,T),d(e,p),R||(I=[B(t,"input",a[2]),B(u,"click",function(){M(a[0])&&a[0].apply(this,arguments)})],R=!0)},p(l,[n]){a=l,n&2&&t.value!==a[1]&&q(t,a[1])},i(l){o||U(()=>{o=V(s,A,{delay:500}),o.start()}),E||U(()=>{E=V(e,A,{delay:500}),E.start()})},o:Y,d(l){l&&(x(s),x(c),x(e)),R=!1,z(I)}}}function Q(a){return a.length>2&&a.length<=20}function W(a,s,h){let o;D(a,w,y=>h(1,o=y));let c="",e=async()=>{};H(async()=>{c=localStorage.getItem("userToken")||"",h(0,e=async()=>{let m=document.getElementById("nickname").value;if(!Q(m)){b({type:C.ERROR,message:"Nickname must be between 3 and 20 characters long"});return}if($(w,o=m,o),c!==""&&c!==null){const t=await J(c,m);if(t.errors){console.log(t.errors),b({type:C.ERROR,message:"Nickname invalid"});return}b({type:C.SUCCESS,message:"Nickname updated successfully"})}else b({type:C.ERROR,message:"User token not found"})})});function i(){o=this.value,w.set(o)}return[e,o,i]}class se extends j{constructor(s){super(),F(this,s,W,K,L,{})}}export{se as component};
