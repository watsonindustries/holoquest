import{f as U}from"../chunks/client.8a2fbda1.js";import{s as R,n as P,c as V,f as Y}from"../chunks/scheduler.dd29296d.js";import{S as F,i as J,g,m as N,s as S,h as p,j as v,n as H,c as C,f as _,k as L,A as T,a as I,x as d,o as B,I as G,J as K,y as Q,d as D,b as W,t as j,E as X,r as $,u as ee,v as te,w as ae,p as le,C as ne}from"../chunks/index.c1e4cb46.js";import{e as O}from"../chunks/each.e59479a4.js";import{n as re}from"../chunks/store.312543e3.js";import{f as se}from"../chunks/const.9aaec1ab.js";const oe=async()=>{try{return{leaderboard:(await U()).data.filter(a=>a.nickname!==null).sort((a,t)=>t.stamps_collected-a.stamps_collected)}}catch(n){return console.error(n),{leaderboard:[]}}},ke=Object.freeze(Object.defineProperty({__proto__:null,load:oe},Symbol.toStringTag,{value:"Module"}));function Z(n){let e,a;return{c(){e=g("span"),a=new G(!1),this.h()},l(t){e=p(t,"SPAN",{class:!0});var i=v(e);a=K(i,!1),i.forEach(_),this.h()},h(){a.a=null,L(e,"class","flex items-center"),T(e,"fill-yellow-400",n[0]===1),T(e,"fill-slate-400",n[0]===2),T(e,"fill-amber-500",n[0]===3)},m(t,i){I(t,e,i),a.m(n[4],e)},p(t,i){i&1&&T(e,"fill-yellow-400",t[0]===1),i&1&&T(e,"fill-slate-400",t[0]===2),i&1&&T(e,"fill-amber-500",t[0]===3)},d(t){t&&_(e)}}}function ce(n){let e,a,t,i,m,k,w,f,h,b,y,E,c=n[0]<4&&Z(n);return{c(){e=g("tr"),a=g("th"),t=g("span"),i=N("# "),m=N(n[0]),k=S(),c&&c.c(),w=S(),f=g("td"),h=N(n[1]),b=S(),y=g("td"),E=N(n[2]),this.h()},l(l){e=p(l,"TR",{});var u=v(e);a=p(u,"TH",{class:!0});var r=v(a);t=p(r,"SPAN",{class:!0});var o=v(t);i=H(o,"# "),m=H(o,n[0]),k=C(o),c&&c.l(o),o.forEach(_),r.forEach(_),w=C(u),f=p(u,"TD",{});var s=v(f);h=H(s,n[1]),s.forEach(_),b=C(u),y=p(u,"TD",{});var q=v(y);E=H(q,n[2]),q.forEach(_),u.forEach(_),this.h()},h(){L(t,"class","flex gap-2 align-middle"),L(a,"class","font-mono font-normal"),T(e,"font-extrabold",n[1]===n[3])},m(l,u){I(l,e,u),d(e,a),d(a,t),d(t,i),d(t,m),d(t,k),c&&c.m(t,null),d(e,w),d(e,f),d(f,h),d(e,b),d(e,y),d(y,E)},p(l,[u]){u&1&&B(m,l[0]),l[0]<4?c?c.p(l,u):(c=Z(l),c.c(),c.m(t,null)):c&&(c.d(1),c=null),u&2&&B(h,l[1]),u&4&&B(E,l[2]),u&10&&T(e,"font-extrabold",l[1]===l[3])},i:P,o:P,d(l){l&&_(e),c&&c.d()}}}function ie(n,e,a){let t;V(n,re,f=>a(3,t=f));let{rank:i}=e,{entryNickname:m}=e,{stamps_collected:k}=e;const w=`
	<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" ><path d="m387-412 35-114-92-74h114l36-112 36 112h114l-93 74 35 114-92-71-93 71ZM240-40v-309q-38-42-59-96t-21-115q0-134 93-227t227-93q134 0 227 93t93 227q0 61-21 115t-59 96v309l-240-80-240 80Zm240-280q100 0 170-70t70-170q0-100-70-170t-170-70q-100 0-170 70t-70 170q0 100 70 170t170 70Z"/></svg>
	`;return n.$$set=f=>{"rank"in f&&a(0,i=f.rank),"entryNickname"in f&&a(1,m=f.entryNickname),"stamps_collected"in f&&a(2,k=f.stamps_collected)},[i,m,k,t,w]}class fe extends F{constructor(e){super(),J(this,e,ie,ce,R,{rank:0,entryNickname:1,stamps_collected:2})}}function x(n,e,a){const t=n.slice();return t[2]=e[a].nickname,t[3]=e[a].stamps_collected,t[5]=a,t}function z(n){let e,a;return e=new fe({props:{rank:n[5]+1,entryNickname:n[2],stamps_collected:n[3]}}),{c(){$(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,i){te(e,t,i),a=!0},p:P,i(t){a||(D(e.$$.fragment,t),a=!0)},o(t){j(e.$$.fragment,t),a=!1},d(t){ae(e,t)}}}function de(n){let e,a,t="Leaderboard",i,m,k=me()+"",w,f,h,b,y,E,c=O(n[0]),l=[];for(let r=0;r<c.length;r+=1)l[r]=z(x(n,c,r));const u=r=>j(l[r],1,1,()=>{l[r]=null});return{c(){e=g("div"),a=g("h1"),a.textContent=t,i=S(),m=g("h2"),w=N(k),f=S(),h=g("table"),b=g("tbody");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=p(r,"DIV",{class:!0});var o=v(e);a=p(o,"H1",{class:!0,["data-svelte-h"]:!0}),Q(a)!=="svelte-1lvb9ow"&&(a.textContent=t),i=C(o),m=p(o,"H2",{class:!0});var s=v(m);w=H(s,k),s.forEach(_),f=C(o),h=p(o,"TABLE",{class:!0});var q=v(h);b=p(q,"TBODY",{});var M=v(b);for(let A=0;A<l.length;A+=1)l[A].l(M);M.forEach(_),q.forEach(_),o.forEach(_),this.h()},h(){L(a,"class","mx-4 my-4 text-4xl font-bold text-primary"),L(m,"class","mx-4 text-lg font-bold"),L(h,"class","table w-full"),L(e,"class","z-0 w-screen space-y-4 overflow-x-auto font-geologica text-lg text-secondary")},m(r,o){I(r,e,o),d(e,a),d(e,i),d(e,m),d(m,w),d(e,f),d(e,h),d(h,b);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(b,null);E=!0},p(r,[o]){if(o&1){c=O(r[0]);let s;for(s=0;s<c.length;s+=1){const q=x(r,c,s);l[s]?(l[s].p(q,o),D(l[s],1)):(l[s]=z(q),l[s].c(),D(l[s],1),l[s].m(b,null))}for(le(),s=c.length;s<l.length;s+=1)u(s);W()}},i(r){if(!E){for(let o=0;o<c.length;o+=1)D(l[o]);y||Y(()=>{y=ne(e,se,{delay:500}),y.start()}),E=!0}},o(r){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)j(l[o]);E=!1},d(r){r&&_(e),X(l,r)}}}function me(){const n=new Date;let e=n.getHours(),a=n.getMinutes();return e<10&&(e=`0${e}`),a<10&&(a=`0${a}`),"Last updated "+e+":"+a}function ue(n,e,a){let{data:t}=e;const{leaderboard:i}=t;return n.$$set=m=>{"data"in m&&a(1,t=m.data)},[i,t]}class we extends F{constructor(e){super(),J(this,e,ue,de,R,{data:1})}}export{we as component,ke as universal};
