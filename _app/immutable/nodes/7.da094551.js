import{S as Q,i as W,s as j,k as h,q as g,a as N,l as k,m as v,r as E,h as d,c as x,n as o,b as U,C as l,_ as H,H as M,O as Y,M as z,L as F,D as G,o as J,Q as K,$ as X,W as $}from"../chunks/index.ca4d86f6.js";import{f as A}from"../chunks/const.2e07ef10.js";import{s as Z}from"../chunks/client.ac66b51c.js";import{b as R,n as B}from"../chunks/store.7f71c011.js";import{T as S}from"../chunks/custom.fbadb549.js";function ee(n){let s,_,i,r,e,c,y,f,t,T,p,w,O,b,P,C,I,L;return{c(){s=h("h1"),_=g("Profile"),r=N(),e=h("div"),c=h("label"),y=g("Nickname"),f=N(),t=h("input"),T=N(),p=h("button"),w=g("Set nickname"),O=N(),b=h("p"),P=g("Your nickname is used to identify you in the leaderboards and realtime events."),this.h()},l(a){s=k(a,"H1",{class:!0});var u=v(s);_=E(u,"Profile"),u.forEach(d),r=x(a),e=k(a,"DIV",{class:!0});var m=v(e);c=k(m,"LABEL",{class:!0,for:!0});var V=v(c);y=E(V,"Nickname"),V.forEach(d),f=x(m),t=k(m,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),T=x(m),p=k(m,"BUTTON",{class:!0});var q=v(p);w=E(q,"Set nickname"),q.forEach(d),O=x(m),b=k(m,"P",{});var D=v(b);P=E(D,"Your nickname is used to identify you in the leaderboards and realtime events."),D.forEach(d),m.forEach(d),this.h()},h(){o(s,"class","mx-4 my-4 font-geologica text-4xl font-bold text-primary"),o(c,"class","font-geologica text-xl font-bold text-secondary"),o(c,"for","nickname"),o(t,"type","text"),o(t,"id","nickname"),o(t,"name","nickname"),o(t,"placeholder","E.g. smol_ame"),o(t,"class","input-bordered input-secondary input w-full max-w-xs"),o(p,"class","btn-secondary btn rounded-full"),o(e,"class","mx-4 my-4 space-y-4")},m(a,u){U(a,s,u),l(s,_),U(a,r,u),U(a,e,u),l(e,c),l(c,y),l(e,f),l(e,t),H(t,n[1]),l(e,T),l(e,p),l(p,w),l(e,O),l(e,b),l(b,P),I||(L=[M(t,"input",n[2]),M(p,"click",function(){X(n[0])&&n[0].apply(this,arguments)})],I=!0)},p(a,[u]){n=a,u&2&&t.value!==n[1]&&H(t,n[1])},i(a){i||Y(()=>{i=$(s,A,{delay:500}),i.start()}),C||Y(()=>{C=$(e,A,{delay:500}),C.start()})},o:z,d(a){a&&d(s),a&&d(r),a&&d(e),I=!1,F(L)}}}function te(n){return n.length>2&&n.length<=20}function ae(n,s,_){let i;G(n,B,y=>_(1,i=y));let r="",e=async()=>{};J(async()=>{r=localStorage.getItem("userToken")||"",_(0,e=async()=>{let f=document.getElementById("nickname").value;if(!te(f)){R({type:S.ERROR,message:"Nickname must be between 3 and 20 characters long"});return}if(K(B,i=f,i),r!==""&&r!==null){const t=await Z(r,f);if(t.errors){console.log(t.errors),R({type:S.ERROR,message:"Nickname invalid"});return}R({type:S.SUCCESS,message:"Nickname updated successfully"})}else R({type:S.ERROR,message:"User token not found"})})});function c(){i=this.value,B.set(i)}return[e,i,c]}class re extends Q{constructor(s){super(),W(this,s,ae,ee,j,{})}}export{re as component};
