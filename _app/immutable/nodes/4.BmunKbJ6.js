import{s as mt,n as st,r as pt,c as ft,o as ht}from"../chunks/scheduler.BFm2QQji.js";import{S as dt,i as _t,e as m,s as _,t as O,c as p,f as P,g as k,b,d as g,j as B,l as f,n as ut,m as l,o as R,p as W,q as bt}from"../chunks/index.BRjTsfqn.js";import{e as nt}from"../chunks/each.D6YF6ztN.js";import{e as xt}from"../chunks/qr-scanner.min.4zogFLvw.js";import{n as vt}from"../chunks/userinfo.D_LcDA1U.js";import{u as Ct}from"../chunks/stamps.B7u3iYP7.js";import{s as ot}from"../chunks/toasts.BxjjKmbh.js";import{T as rt}from"../chunks/custom.DgUHssZa.js";import{c as gt}from"../chunks/stamps.CTP00fdk.js";function ct(r,t,n){const u=r.slice();return u[7]=t[n],u}function it(r){let t,n=r[7].label+"",u;return{c(){t=m("li"),u=O(n),this.h()},l(i){t=p(i,"LI",{class:!0});var c=P(t);u=B(c,n),c.forEach(g),this.h()},h(){f(t,"class","font-mono text-base")},m(i,c){ut(i,t,c),l(t,u)},p(i,c){c&1&&n!==(n=i[7].label+"")&&W(u,n)},d(i){i&&g(t)}}}function St(r){let t,n,u="Available cameras",i,c,I,h,j="clear localstorage",A,d,X="User info",z,T,D,E,q,M,S,Z="Stamps",V,y,Y,N=r[1]?"torn":"untorn",L,F,x,$="Untear sheet",G,v,tt="Refetch stamp data",H,C,et="Reset collected stamps",J,lt,U=nt(r[0]),o=[];for(let a=0;a<U.length;a+=1)o[a]=it(ct(r,U,a));return{c(){t=m("div"),n=m("p"),n.textContent=u,i=_(),c=m("ul");for(let a=0;a<o.length;a+=1)o[a].c();I=_(),h=m("button"),h.textContent=j,A=_(),d=m("p"),d.textContent=X,z=_(),T=m("p"),D=O("Nickname: "),E=m("span"),q=O(r[2]),M=_(),S=m("p"),S.textContent=Z,V=_(),y=m("p"),Y=O("Stamp sheet status: "),L=O(N),F=_(),x=m("button"),x.textContent=$,G=_(),v=m("button"),v.textContent=tt,H=_(),C=m("button"),C.textContent=et,this.h()},l(a){t=p(a,"DIV",{class:!0});var e=P(t);n=p(e,"P",{class:!0,"data-svelte-h":!0}),k(n)!=="svelte-gi42xl"&&(n.textContent=u),i=b(e),c=p(e,"UL",{});var s=P(c);for(let Q=0;Q<o.length;Q+=1)o[Q].l(s);s.forEach(g),I=b(e),h=p(e,"BUTTON",{class:!0,"data-svelte-h":!0}),k(h)!=="svelte-iimbze"&&(h.textContent=j),A=b(e),d=p(e,"P",{class:!0,"data-svelte-h":!0}),k(d)!=="svelte-1oto883"&&(d.textContent=X),z=b(e),T=p(e,"P",{});var w=P(T);D=B(w,"Nickname: "),E=p(w,"SPAN",{class:!0});var at=P(E);q=B(at,r[2]),at.forEach(g),w.forEach(g),M=b(e),S=p(e,"P",{class:!0,"data-svelte-h":!0}),k(S)!=="svelte-1mth1v6"&&(S.textContent=Z),V=b(e),y=p(e,"P",{});var K=P(y);Y=B(K,"Stamp sheet status: "),L=B(K,N),K.forEach(g),F=b(e),x=p(e,"BUTTON",{class:!0,"data-svelte-h":!0}),k(x)!=="svelte-60rl0t"&&(x.textContent=$),G=b(e),v=p(e,"BUTTON",{class:!0,"data-svelte-h":!0}),k(v)!=="svelte-1309waf"&&(v.textContent=tt),H=b(e),C=p(e,"BUTTON",{class:!0,"data-svelte-h":!0}),k(C)!=="svelte-1agw5uv"&&(C.textContent=et),e.forEach(g),this.h()},h(){f(n,"class","text-xl font-bold"),f(h,"class","btn-error btn mx-auto w-8/12 gap-2 rounded-full"),f(d,"class","text-xl font-bold"),f(E,"class","font-mono"),f(S,"class","text-xl font-bold"),f(x,"class","btn-primary btn mx-auto w-8/12 gap-2 rounded-full text-base-100"),f(v,"class","btn-primary btn w-8/12 gap-2 rounded-full text-base-100"),f(C,"class","btn-error btn mx-auto w-8/12 gap-2 rounded-full"),f(t,"class","mx-4 space-y-4")},m(a,e){ut(a,t,e),l(t,n),l(t,i),l(t,c);for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(c,null);l(t,I),l(t,h),l(t,A),l(t,d),l(t,z),l(t,T),l(T,D),l(T,E),l(E,q),l(t,M),l(t,S),l(t,V),l(t,y),l(y,Y),l(y,L),l(t,F),l(t,x),l(t,G),l(t,v),l(t,H),l(t,C),J||(lt=[R(h,"click",r[3]),R(x,"click",r[4]),R(v,"click",r[5]),R(C,"click",r[6])],J=!0)},p(a,[e]){if(e&1){U=nt(a[0]);let s;for(s=0;s<U.length;s+=1){const w=ct(a,U,s);o[s]?o[s].p(w,e):(o[s]=it(w),o[s].c(),o[s].m(c,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=U.length}e&4&&W(q,a[2]),e&2&&N!==(N=a[1]?"torn":"untorn")&&W(L,N)},i:st,o:st,d(a){a&&g(t),bt(o,a),J=!1,pt(lt)}}}function kt(r,t,n){let u;ft(r,vt,d=>n(2,u=d));let i=[],c=!1;return ht(async()=>{n(0,i=await xt.listCameras(!0)),n(1,c=localStorage.getItem("isStampSheetTorn")==="yes")}),[i,c,u,()=>{localStorage.clear()},()=>localStorage.setItem("isStampSheetTorn","no"),async()=>{await Ct(),ot({message:"Stamp data refetched",type:rt.SUCCESS})},()=>{gt.reset(),ot({message:"Collected stamps reset",type:rt.SUCCESS})}]}class It extends dt{constructor(t){super(),_t(this,t,kt,St,mt,{})}}export{It as component};
