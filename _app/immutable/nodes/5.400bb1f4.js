import{T as ge,S as de,i as ue,s as pe,k as y,q as j,l as b,m as E,r as z,h,n as S,b as M,E as f,u as me,U as _e,V as ne,a as C,y as W,c as Q,z as X,M as R,A as Y,R as ve,g as T,f as Se,d as A,N as ye,B as Z,o as be,O as Ee,P as $e,Q as xe,v as Ie}from"../chunks/index.11e3f03e.js";import{e as Ve}from"../chunks/qr-scanner.min.4880ecae.js";import{s as we}from"../chunks/crypto.6f6cc81d.js";import{e as De}from"../chunks/const.96e908ff.js";import{I as oe,S as re,Q as le,E as ke}from"../chunks/index.d92546bf.js";function ce(l,{delay:s=0,duration:n=400,easing:e=ge}={}){const o=+getComputedStyle(l).opacity;return{delay:s,duration:n,easing:e,css:a=>`opacity: ${a*o}`}}function Pe(l){let s,n,e,o,a,g,c,$;return{c(){s=y("div"),n=y("div"),e=y("div"),o=y("span"),a=j(l[1]),this.h()},l(u){s=b(u,"DIV",{class:!0});var _=E(s);n=b(_,"DIV",{class:!0});var d=E(n);e=b(d,"DIV",{});var v=E(e);o=b(v,"SPAN",{});var k=E(o);a=z(k,l[1]),k.forEach(h),v.forEach(h),d.forEach(h),_.forEach(h),this.h()},h(){S(n,"class",g="alert alert-"+l[0]),S(s,"class","toast-center toast-bottom toast w-52")},m(u,_){M(u,s,_),f(s,n),f(n,e),f(e,o),f(o,a),$=!0},p(u,[_]){(!$||_&2)&&me(a,u[1]),(!$||_&1&&g!==(g="alert alert-"+u[0]))&&S(n,"class",g)},i(u){$||(_e(()=>{$&&(c||(c=ne(n,ce,{},!0)),c.run(1))}),$=!0)},o(u){c||(c=ne(n,ce,{},!1)),c.run(0),$=!1},d(u){u&&h(s),u&&c&&c.end()}}}function Ce(l,s,n){let{type:e}=s,{message:o}=s;return l.$$set=a=>{"type"in a&&n(0,e=a.type),"message"in a&&n(1,o=a.message)},[e,o]}class Qe extends de{constructor(s){super(),ue(this,s,Ce,Pe,pe,{type:0,message:1})}}function ie(l,s,n){const e=l.slice();return e[8]=s[n],e}function fe(l){let s,n;const e=[l[8]];let o={};for(let a=0;a<e.length;a+=1)o=Ee(o,e[a]);return s=new Qe({props:o}),{c(){W(s.$$.fragment)},l(a){X(s.$$.fragment,a)},m(a,g){Y(s,a,g),n=!0},p(a,g){const c=g&2?$e(e,[xe(a[8])]):{};s.$set(c)},i(a){n||(T(s.$$.fragment,a),n=!0)},o(a){A(s.$$.fragment,a),n=!1},d(a){Z(s,a)}}}function Re(l){let s,n,e,o,a,g,c,$,u,_,d,v,k,q=l[0]==="scanning"?"Stop":"Scan",B,U,x,N,F,P,I,w,G,V,J,ee,D=l[1],r=[];for(let t=0;t<D.length;t+=1)r[t]=fe(ie(l,D,t));const he=t=>A(r[t],1,1,()=>{r[t]=null});return v=new oe({props:{src:l[0]==="scanning"?re:le,theme:"solid",class:"color-gray-900",size:"32px"}}),w=new oe({props:{src:ke,theme:"solid",class:"color-gray-900",size:"28px"}}),{c(){s=y("div");for(let t=0;t<r.length;t+=1)r[t].c();n=C(),e=y("div"),o=y("h1"),a=j("Scanner"),g=C(),c=y("p"),$=j("Press Scan, and scan the QR code of the stamp!"),u=C(),_=y("div"),d=y("button"),W(v.$$.fragment),k=C(),B=j(q),U=C(),x=y("div"),N=y("video"),F=C(),P=y("div"),I=y("a"),W(w.$$.fragment),G=j(`
			View collected stamps`),this.h()},l(t){s=b(t,"DIV",{class:!0});var i=E(s);for(let L=0;L<r.length;L+=1)r[L].l(i);i.forEach(h),n=Q(t),e=b(t,"DIV",{class:!0});var p=E(e);o=b(p,"H1",{class:!0});var m=E(o);a=z(m,"Scanner"),m.forEach(h),g=Q(p),c=b(p,"P",{class:!0});var O=E(c);$=z(O,"Press Scan, and scan the QR code of the stamp!"),O.forEach(h),u=Q(p),_=b(p,"DIV",{class:!0});var te=E(_);d=b(te,"BUTTON",{class:!0});var H=E(d);X(v.$$.fragment,H),k=Q(H),B=z(H,q),H.forEach(h),te.forEach(h),U=Q(p),x=b(p,"DIV",{id:!0,class:!0});var se=E(x);N=b(se,"VIDEO",{}),E(N).forEach(h),se.forEach(h),F=Q(p),P=b(p,"DIV",{class:!0});var ae=E(P);I=b(ae,"A",{class:!0,href:!0});var K=E(I);X(w.$$.fragment,K),G=z(K,`
			View collected stamps`),K.forEach(h),ae.forEach(h),p.forEach(h),this.h()},h(){S(s,"class","toast-center toast-bottom toast"),S(o,"class","text-center font-geologica text-4xl font-bold text-primary"),S(c,"class","px-2 text-center text-xl"),S(d,"class","btn mx-auto w-6/12 gap-2 rounded-full text-xl"),R(d,"btn-primary",l[0]==="stopped"),R(d,"btn-error",l[0]==="scanning"),S(_,"class","flex flex-col justify-center space-y-4"),S(x,"id","scanner-preview-area"),S(x,"class","h-96 bg-slate-800"),R(x,"hidden",l[0]==="stopped"),S(I,"class","btn-secondary btn mx-auto mt-2 gap-2 rounded-full text-lg"),S(I,"href","/"),S(P,"class","flex flex-col justify-center space-y-4"),S(e,"class","space-y-4")},m(t,i){M(t,s,i);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(s,null);M(t,n,i),M(t,e,i),f(e,o),f(o,a),f(e,g),f(e,c),f(c,$),f(e,u),f(e,_),f(_,d),Y(v,d,null),f(d,k),f(d,B),f(e,U),f(e,x),f(x,N),f(e,F),f(e,P),f(P,I),Y(w,I,null),f(I,G),V=!0,J||(ee=ve(d,"click",l[2]),J=!0)},p(t,[i]){if(i&2){D=t[1];let m;for(m=0;m<D.length;m+=1){const O=ie(t,D,m);r[m]?(r[m].p(O,i),T(r[m],1)):(r[m]=fe(O),r[m].c(),T(r[m],1),r[m].m(s,null))}for(Ie(),m=D.length;m<r.length;m+=1)he(m);Se()}const p={};i&1&&(p.src=t[0]==="scanning"?re:le),v.$set(p),(!V||i&1)&&q!==(q=t[0]==="scanning"?"Stop":"Scan")&&me(B,q),(!V||i&1)&&R(d,"btn-primary",t[0]==="stopped"),(!V||i&1)&&R(d,"btn-error",t[0]==="scanning"),(!V||i&1)&&R(x,"hidden",t[0]==="stopped")},i(t){if(!V){for(let i=0;i<D.length;i+=1)T(r[i]);T(v.$$.fragment,t),T(w.$$.fragment,t),V=!0}},o(t){r=r.filter(Boolean);for(let i=0;i<r.length;i+=1)A(r[i]);A(v.$$.fragment,t),A(w.$$.fragment,t),V=!1},d(t){t&&h(s),ye(r,t),t&&h(n),t&&h(e),Z(v),Z(w),J=!1,ee()}}}function Te(l,s,n){let e="stopped",o,a,g="",c=[];const $=De.map(d=>d.hash);function u(){e==="scanning"?(n(0,e="stopped"),a.pause()):e==="stopped"&&(n(0,e="scanning"),a.start())}function _(d){g=d.data,u();let v=we(g);$.includes(v)?(localStorage.setItem(v,g),n(1,c=[{type:"success",message:"Stamp Saved!"}])):n(1,c=[{type:"error",message:"Invalid Stamp!"}]),setTimeout(()=>{n(1,c=[])},4e3)}return be(()=>{o=document.querySelector("video"),a=new Ve(o,_,{highlightScanRegion:!0,highlightCodeOutline:!0})}),[e,c,u]}class Be extends de{constructor(s){super(),ue(this,s,Te,Re,pe,{})}}export{Be as component};
