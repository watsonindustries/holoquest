import{S as M,i as Y,s as A,k as y,q as v,a as N,l as k,m as g,r as E,h as m,c as S,n as r,b as O,C as l,a3 as q,H as D,M as H,L as Q,D as $,o as j,Q as z,a4 as F}from"../chunks/index.bdf88aa0.js";import{s as G}from"../chunks/client.288ec544.js";import{a as x,n as U}from"../chunks/store.359b772e.js";import{T as R}from"../chunks/custom.b03ad683.js";function J(a){let i,p,s,e,o,_,f,t,h,d,T,w,b,C,I,B;return{c(){i=y("h1"),p=v("Settings"),s=N(),e=y("div"),o=y("label"),_=v("Nickname"),f=N(),t=y("input"),h=N(),d=y("button"),T=v("Set nickname"),w=N(),b=y("p"),C=v("Your nickname is used to identify you in the leaderboards and realtime events."),this.h()},l(n){i=k(n,"H1",{class:!0});var c=g(i);p=E(c,"Settings"),c.forEach(m),s=S(n),e=k(n,"DIV",{class:!0});var u=g(e);o=k(u,"LABEL",{class:!0,for:!0});var L=g(o);_=E(L,"Nickname"),L.forEach(m),f=S(u),t=k(u,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),h=S(u),d=k(u,"BUTTON",{class:!0});var P=g(d);T=E(P,"Set nickname"),P.forEach(m),w=S(u),b=k(u,"P",{});var V=g(b);C=E(V,"Your nickname is used to identify you in the leaderboards and realtime events."),V.forEach(m),u.forEach(m),this.h()},h(){r(i,"class","mx-4 my-4 font-geologica text-4xl font-bold text-primary"),r(o,"class","font-geologica text-xl font-bold text-secondary"),r(o,"for","nickname"),r(t,"type","text"),r(t,"id","nickname"),r(t,"name","nickname"),r(t,"placeholder","E.g. smol_ame"),r(t,"class","input-bordered input-secondary input w-full max-w-xs"),r(d,"class","btn-secondary btn rounded-full"),r(e,"class","mx-4 my-4 space-y-4")},m(n,c){O(n,i,c),l(i,p),O(n,s,c),O(n,e,c),l(e,o),l(o,_),l(e,f),l(e,t),q(t,a[1]),l(e,h),l(e,d),l(d,T),l(e,w),l(e,b),l(b,C),I||(B=[D(t,"input",a[2]),D(d,"click",function(){F(a[0])&&a[0].apply(this,arguments)})],I=!0)},p(n,[c]){a=n,c&2&&t.value!==a[1]&&q(t,a[1])},i:H,o:H,d(n){n&&m(i),n&&m(s),n&&m(e),I=!1,Q(B)}}}function K(a){return a.length>2&&a.length<=20}function W(a,i,p){let s;$(a,U,f=>p(1,s=f));let e="",o=async()=>{};j(async()=>{e=localStorage.getItem("userToken")||"",p(0,o=async()=>{let t=document.getElementById("nickname").value;if(!K(t)){x({type:R.ERROR,message:"Nickname must be between 3 and 20 characters long"});return}if(z(U,s=t,s),e!==""&&e!==null){const h=await G(e,t);if(h.errors){console.log(h.errors),x({type:R.ERROR,message:"Nickname invalid"});return}x({type:R.SUCCESS,message:"Nickname updated successfully"})}else x({type:R.ERROR,message:"User token not found"})})});function _(){s=this.value,U.set(s)}return[o,s,_]}class ae extends M{constructor(i){super(),Y(this,i,W,J,A,{})}}export{ae as component};
