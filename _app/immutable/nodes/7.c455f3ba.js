import{s as A,f as U,n as L,r as Y,c as j,o as D,h as H,k as K}from"../chunks/scheduler.dd29296d.js";import{S as M,i as $,g as p,s as k,h as _,y as g,c as v,j as F,f as x,k as r,a as S,x as d,K as q,z as B,C as V}from"../chunks/index.c1e4cb46.js";import{f as z}from"../chunks/const.9aaec1ab.js";import{s as G}from"../chunks/client.8a2fbda1.js";import{b,n as w}from"../chunks/store.312543e3.js";import{T as C}from"../chunks/custom.3f2abf42.js";function J(a){let s,h="Profile",o,c,e,i,y="Nickname",m,t,N,u,O="Set nickname",T,f,P="Your nickname is used to identify you in the leaderboards and realtime events.",E,R,I;return{c(){s=p("h1"),s.textContent=h,c=k(),e=p("div"),i=p("label"),i.textContent=y,m=k(),t=p("input"),N=k(),u=p("button"),u.textContent=O,T=k(),f=p("p"),f.textContent=P,this.h()},l(l){s=_(l,"H1",{class:!0,["data-svelte-h"]:!0}),g(s)!=="svelte-zwrkr8"&&(s.textContent=h),c=v(l),e=_(l,"DIV",{class:!0});var n=F(e);i=_(n,"LABEL",{class:!0,for:!0,["data-svelte-h"]:!0}),g(i)!=="svelte-1qg61em"&&(i.textContent=y),m=v(n),t=_(n,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),N=v(n),u=_(n,"BUTTON",{class:!0,["data-svelte-h"]:!0}),g(u)!=="svelte-134mnq4"&&(u.textContent=O),T=v(n),f=_(n,"P",{["data-svelte-h"]:!0}),g(f)!=="svelte-1sy1pg1"&&(f.textContent=P),n.forEach(x),this.h()},h(){r(s,"class","mx-4 my-4 font-geologica text-4xl font-bold text-primary"),r(i,"class","font-geologica text-xl font-bold text-secondary"),r(i,"for","nickname"),r(t,"type","text"),r(t,"id","nickname"),r(t,"name","nickname"),r(t,"placeholder","E.g. smol_ame"),r(t,"class","input-bordered input-secondary input w-full max-w-xs"),r(u,"class","btn-secondary btn rounded-full"),r(e,"class","mx-4 my-4 space-y-4")},m(l,n){S(l,s,n),S(l,c,n),S(l,e,n),d(e,i),d(e,m),d(e,t),q(t,a[1]),d(e,N),d(e,u),d(e,T),d(e,f),R||(I=[B(t,"input",a[2]),B(u,"click",function(){K(a[0])&&a[0].apply(this,arguments)})],R=!0)},p(l,[n]){a=l,n&2&&t.value!==a[1]&&q(t,a[1])},i(l){o||U(()=>{o=V(s,z,{delay:500}),o.start()}),E||U(()=>{E=V(e,z,{delay:500}),E.start()})},o:L,d(l){l&&(x(s),x(c),x(e)),R=!1,Y(I)}}}function Q(a){return a.length>2&&a.length<=20}function W(a,s,h){let o;j(a,w,y=>h(1,o=y));let c="",e=async()=>{};D(async()=>{c=localStorage.getItem("userToken")||"",h(0,e=async()=>{let m=document.getElementById("nickname").value;if(!Q(m)){b({type:C.ERROR,message:"Nickname must be between 3 and 20 characters long"});return}if(H(w,o=m,o),c!==""&&c!==null){const t=await G(c,m);if(t.errors){console.log(t.errors),b({type:C.ERROR,message:"Nickname invalid"});return}b({type:C.SUCCESS,message:"Nickname updated successfully"})}else b({type:C.ERROR,message:"User token not found"})})});function i(){o=this.value,w.set(o)}return[e,o,i]}class se extends M{constructor(s){super(),$(this,s,W,J,A,{})}}export{se as component};
