import{a as F}from"../chunks/const.DqWx3gcm.js";import{s as V,n as B,c as G,a as K}from"../chunks/scheduler.CBKiOPsq.js";import{S as Z,i as x,e as p,t as L,s as j,c as b,f as v,j as D,b as A,d as _,l as q,G as S,n as P,m as d,p as O,J,K as Q,g as Y,y as H,x as W,w as C,q as X,C as $,D as ee,E as te,F as ae,A as le,u as ne}from"../chunks/index.UAAIVKsT.js";import{e as I}from"../chunks/each.D6YF6ztN.js";import{n as oe}from"../chunks/store.IwZCqYX8.js";import{f as re}from"../chunks/index.DDOAEnwF.js";var se={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ce=se.VITE_HOLOQUEST_API_TOKEN,ie={Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json",Authorization:`Bearer ${ce}`};async function fe(){return await(await fetch(`${F}/leaderboard`,{method:"GET",headers:ie})).json()}const de=async()=>{try{return{leaderboard:(await fe()).data.filter(a=>a.nickname!==null).sort((a,t)=>t.stamps_collected-a.stamps_collected)}}catch(n){return console.error(n),{leaderboard:[]}}},Te=Object.freeze(Object.defineProperty({__proto__:null,load:de},Symbol.toStringTag,{value:"Module"}));function M(n){let e,a;return{c(){e=p("span"),a=new J(!1),this.h()},l(t){e=b(t,"SPAN",{class:!0});var i=v(e);a=Q(i,!1),i.forEach(_),this.h()},h(){a.a=null,q(e,"class","flex items-center"),S(e,"fill-yellow-400",n[0]===1),S(e,"fill-slate-400",n[0]===2),S(e,"fill-amber-500",n[0]===3)},m(t,i){P(t,e,i),a.m(n[4],e)},p(t,i){i&1&&S(e,"fill-yellow-400",t[0]===1),i&1&&S(e,"fill-slate-400",t[0]===2),i&1&&S(e,"fill-amber-500",t[0]===3)},d(t){t&&_(e)}}}function me(n){let e,a,t,i,m,k,w,f,h,g,y,E,c=n[0]<4&&M(n);return{c(){e=p("tr"),a=p("th"),t=p("span"),i=L("# "),m=L(n[0]),k=j(),c&&c.c(),w=j(),f=p("td"),h=L(n[1]),g=j(),y=p("td"),E=L(n[2]),this.h()},l(l){e=b(l,"TR",{});var u=v(e);a=b(u,"TH",{class:!0});var o=v(a);t=b(o,"SPAN",{class:!0});var s=v(t);i=D(s,"# "),m=D(s,n[0]),k=A(s),c&&c.l(s),s.forEach(_),o.forEach(_),w=A(u),f=b(u,"TD",{});var r=v(f);h=D(r,n[1]),r.forEach(_),g=A(u),y=b(u,"TD",{});var T=v(y);E=D(T,n[2]),T.forEach(_),u.forEach(_),this.h()},h(){q(t,"class","flex gap-2 align-middle"),q(a,"class","font-mono font-normal"),S(e,"font-extrabold",n[1]===n[3])},m(l,u){P(l,e,u),d(e,a),d(a,t),d(t,i),d(t,m),d(t,k),c&&c.m(t,null),d(e,w),d(e,f),d(f,h),d(e,g),d(e,y),d(y,E)},p(l,[u]){u&1&&O(m,l[0]),l[0]<4?c?c.p(l,u):(c=M(l),c.c(),c.m(t,null)):c&&(c.d(1),c=null),u&2&&O(h,l[1]),u&4&&O(E,l[2]),u&10&&S(e,"font-extrabold",l[1]===l[3])},i:B,o:B,d(l){l&&_(e),c&&c.d()}}}function ue(n,e,a){let t;G(n,oe,f=>a(3,t=f));let{rank:i}=e,{entryNickname:m}=e,{stamps_collected:k}=e;const w=`
	<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" ><path d="m387-412 35-114-92-74h114l36-112 36 112h114l-93 74 35 114-92-71-93 71ZM240-40v-309q-38-42-59-96t-21-115q0-134 93-227t227-93q134 0 227 93t93 227q0 61-21 115t-59 96v309l-240-80-240 80Zm240-280q100 0 170-70t70-170q0-100-70-170t-170-70q-100 0-170 70t-70 170q0 100 70 170t170 70Z"/></svg>
	`;return n.$$set=f=>{"rank"in f&&a(0,i=f.rank),"entryNickname"in f&&a(1,m=f.entryNickname),"stamps_collected"in f&&a(2,k=f.stamps_collected)},[i,m,k,t,w]}class _e extends Z{constructor(e){super(),x(this,e,ue,me,V,{rank:0,entryNickname:1,stamps_collected:2})}}function U(n,e,a){const t=n.slice();return t[2]=e[a].nickname,t[3]=e[a].stamps_collected,t[5]=a,t}function z(n){let e,a;return e=new _e({props:{rank:n[5]+1,entryNickname:n[2],stamps_collected:n[3]}}),{c(){$(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,i){te(e,t,i),a=!0},p:B,i(t){a||(H(e.$$.fragment,t),a=!0)},o(t){C(e.$$.fragment,t),a=!1},d(t){ae(e,t)}}}function he(n){let e,a,t="Leaderboard",i,m,k=pe()+"",w,f,h,g,y,E,c=I(n[0]),l=[];for(let o=0;o<c.length;o+=1)l[o]=z(U(n,c,o));const u=o=>C(l[o],1,1,()=>{l[o]=null});return{c(){e=p("div"),a=p("h1"),a.textContent=t,i=j(),m=p("h2"),w=L(k),f=j(),h=p("table"),g=p("tbody");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var s=v(e);a=b(s,"H1",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-1lvb9ow"&&(a.textContent=t),i=A(s),m=b(s,"H2",{class:!0});var r=v(m);w=D(r,k),r.forEach(_),f=A(s),h=b(s,"TABLE",{class:!0});var T=v(h);g=b(T,"TBODY",{});var R=v(g);for(let N=0;N<l.length;N+=1)l[N].l(R);R.forEach(_),T.forEach(_),s.forEach(_),this.h()},h(){q(a,"class","mx-4 my-4 text-4xl font-bold text-primary"),q(m,"class","mx-4 text-lg font-bold"),q(h,"class","table w-full"),q(e,"class","z-0 w-screen space-y-4 overflow-x-auto font-geologica text-lg text-secondary")},m(o,s){P(o,e,s),d(e,a),d(e,i),d(e,m),d(m,w),d(e,f),d(e,h),d(h,g);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(g,null);E=!0},p(o,[s]){if(s&1){c=I(o[0]);let r;for(r=0;r<c.length;r+=1){const T=U(o,c,r);l[r]?(l[r].p(T,s),H(l[r],1)):(l[r]=z(T),l[r].c(),H(l[r],1),l[r].m(g,null))}for(le(),r=c.length;r<l.length;r+=1)u(r);W()}},i(o){if(!E){for(let s=0;s<c.length;s+=1)H(l[s]);y||K(()=>{y=ne(e,re,{delay:500}),y.start()}),E=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)C(l[s]);E=!1},d(o){o&&_(e),X(l,o)}}}function pe(){const n=new Date;let e=n.getHours(),a=n.getMinutes();return e<10&&(e=`0${e}`),a<10&&(a=`0${a}`),"Last updated "+e+":"+a}function be(n,e,a){let{data:t}=e;const{leaderboard:i}=t;return n.$$set=m=>{"data"in m&&a(1,t=m.data)},[i,t]}class Se extends Z{constructor(e){super(),x(this,e,be,he,V,{data:1})}}export{Se as component,Te as universal};
