import{S as Q,i as W,s as j,k as y,q as g,a as E,l as k,m as v,r as N,h as d,c as S,n as o,b as U,C as l,_ as A,H as D,O as H,M as z,L as F,D as G,o as J,Q as K,$ as X,W as M}from"../chunks/index.862ba5ca.js";import{f as $}from"../chunks/const.cf052224.js";import{s as Z}from"../chunks/client.c63b83f2.js";import{b as T,n as B}from"../chunks/store.abc0b967.js";import{T as x}from"../chunks/custom.3f2abf42.js";function ee(n){let s,_,i,r,e,c,h,f,t,R,p,w,O,b,P,C,I,L;return{c(){s=y("h1"),_=g("Profile"),r=E(),e=y("div"),c=y("label"),h=g("Nickname"),f=E(),t=y("input"),R=E(),p=y("button"),w=g("Set nickname"),O=E(),b=y("p"),P=g("Your nickname is used to identify you in the leaderboards and realtime events."),this.h()},l(a){s=k(a,"H1",{class:!0});var u=v(s);_=N(u,"Profile"),u.forEach(d),r=S(a),e=k(a,"DIV",{class:!0});var m=v(e);c=k(m,"LABEL",{class:!0,for:!0});var V=v(c);h=N(V,"Nickname"),V.forEach(d),f=S(m),t=k(m,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),R=S(m),p=k(m,"BUTTON",{class:!0});var Y=v(p);w=N(Y,"Set nickname"),Y.forEach(d),O=S(m),b=k(m,"P",{});var q=v(b);P=N(q,"Your nickname is used to identify you in the leaderboards and realtime events."),q.forEach(d),m.forEach(d),this.h()},h(){o(s,"class","mx-4 my-4 font-geologica text-4xl font-bold text-primary"),o(c,"class","font-geologica text-xl font-bold text-secondary"),o(c,"for","nickname"),o(t,"type","text"),o(t,"id","nickname"),o(t,"name","nickname"),o(t,"placeholder","E.g. smol_ame"),o(t,"class","input-bordered input-secondary input w-full max-w-xs"),o(p,"class","btn-secondary btn rounded-full"),o(e,"class","mx-4 my-4 space-y-4")},m(a,u){U(a,s,u),l(s,_),U(a,r,u),U(a,e,u),l(e,c),l(c,h),l(e,f),l(e,t),A(t,n[1]),l(e,R),l(e,p),l(p,w),l(e,O),l(e,b),l(b,P),I||(L=[D(t,"input",n[2]),D(p,"click",function(){X(n[0])&&n[0].apply(this,arguments)})],I=!0)},p(a,[u]){n=a,u&2&&t.value!==n[1]&&A(t,n[1])},i(a){i||H(()=>{i=M(s,$,{delay:500}),i.start()}),C||H(()=>{C=M(e,$,{delay:500}),C.start()})},o:z,d(a){a&&d(s),a&&d(r),a&&d(e),I=!1,F(L)}}}function te(n){return n.length>2&&n.length<=20}function ae(n,s,_){let i;G(n,B,h=>_(1,i=h));let r="",e=async()=>{};J(async()=>{r=localStorage.getItem("userToken")||"",_(0,e=async()=>{let f=document.getElementById("nickname").value;if(!te(f)){T({type:x.ERROR,message:"Nickname must be between 3 and 20 characters long"});return}if(K(B,i=f,i),r!==""&&r!==null){const t=await Z(r,f);if(t.errors){console.log(t.errors),T({type:x.ERROR,message:"Nickname invalid"});return}T({type:x.SUCCESS,message:"Nickname updated successfully"})}else T({type:x.ERROR,message:"User token not found"})})});function c(){i=this.value,B.set(i)}return[e,i,c]}class re extends Q{constructor(s){super(),W(this,s,ae,ee,j,{})}}export{re as component};
