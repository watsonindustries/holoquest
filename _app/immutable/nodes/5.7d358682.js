import{f as V}from"../chunks/client.b4cb56e9.js";import{S as Y,i as F,s as U,k as b,q as T,a as S,l as p,m as g,r as D,c as B,h as u,n as N,N as L,b as z,C as i,u as A,M as O,D as W,g as H,f as G,O as J,d as P,Y as K,y as Q,z as X,A as x,B as $,v as ee,W as te}from"../chunks/index.ca4d86f6.js";import{n as ae}from"../chunks/store.7f71c011.js";import{f as le}from"../chunks/const.22bd85df.js";const ne=async()=>{try{return{leaderboard:(await V()).data.filter(t=>t.nickname!==null).sort((t,a)=>a.stamps_collected-t.stamps_collected)}}catch(n){return console.error(n),{leaderboard:[]}}},_e=Object.freeze(Object.defineProperty({__proto__:null,load:ne},Symbol.toStringTag,{value:"Module"}));function C(n){let e;return{c(){e=b("span"),this.h()},l(t){e=p(t,"SPAN",{class:!0});var a=g(e);a.forEach(u),this.h()},h(){N(e,"class","flex items-center"),L(e,"fill-yellow-400",n[0]===1),L(e,"fill-slate-400",n[0]===2),L(e,"fill-amber-500",n[0]===3)},m(t,a){z(t,e,a),e.innerHTML=n[4]},p(t,a){a&1&&L(e,"fill-yellow-400",t[0]===1),a&1&&L(e,"fill-slate-400",t[0]===2),a&1&&L(e,"fill-amber-500",t[0]===3)},d(t){t&&u(e)}}}function re(n){let e,t,a,h,d,k,y,f,_,v,w,E,c=n[0]<4&&C(n);return{c(){e=b("tr"),t=b("th"),a=b("span"),h=T("# "),d=T(n[0]),k=S(),c&&c.c(),y=S(),f=b("td"),_=T(n[1]),v=S(),w=b("td"),E=T(n[2]),this.h()},l(l){e=p(l,"TR",{});var m=g(e);t=p(m,"TH",{class:!0});var r=g(t);a=p(r,"SPAN",{class:!0});var s=g(a);h=D(s,"# "),d=D(s,n[0]),k=B(s),c&&c.l(s),s.forEach(u),r.forEach(u),y=B(m),f=p(m,"TD",{});var o=g(f);_=D(o,n[1]),o.forEach(u),v=B(m),w=p(m,"TD",{});var q=g(w);E=D(q,n[2]),q.forEach(u),m.forEach(u),this.h()},h(){N(a,"class","flex gap-2 align-middle"),N(t,"class","font-mono font-normal"),L(e,"font-extrabold",n[1]===n[3])},m(l,m){z(l,e,m),i(e,t),i(t,a),i(a,h),i(a,d),i(a,k),c&&c.m(a,null),i(e,y),i(e,f),i(f,_),i(e,v),i(e,w),i(w,E)},p(l,[m]){m&1&&A(d,l[0]),l[0]<4?c?c.p(l,m):(c=C(l),c.c(),c.m(a,null)):c&&(c.d(1),c=null),m&2&&A(_,l[1]),m&4&&A(E,l[2]),m&10&&L(e,"font-extrabold",l[1]===l[3])},i:O,o:O,d(l){l&&u(e),c&&c.d()}}}function oe(n,e,t){let a;W(n,ae,f=>t(3,a=f));let{rank:h}=e,{entryNickname:d}=e,{stamps_collected:k}=e;const y=`
	<svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" ><path d="m387-412 35-114-92-74h114l36-112 36 112h114l-93 74 35 114-92-71-93 71ZM240-40v-309q-38-42-59-96t-21-115q0-134 93-227t227-93q134 0 227 93t93 227q0 61-21 115t-59 96v309l-240-80-240 80Zm240-280q100 0 170-70t70-170q0-100-70-170t-170-70q-100 0-170 70t-70 170q0 100 70 170t170 70Z"/></svg>
	`;return n.$$set=f=>{"rank"in f&&t(0,h=f.rank),"entryNickname"in f&&t(1,d=f.entryNickname),"stamps_collected"in f&&t(2,k=f.stamps_collected)},[h,d,k,a,y]}class se extends Y{constructor(e){super(),F(this,e,oe,re,U,{rank:0,entryNickname:1,stamps_collected:2})}}function I(n,e,t){const a=n.slice();return a[2]=e[t].nickname,a[3]=e[t].stamps_collected,a[5]=t,a}function R(n){let e,t;return e=new se({props:{rank:n[5]+1,entryNickname:n[2],stamps_collected:n[3]}}),{c(){Q(e.$$.fragment)},l(a){X(e.$$.fragment,a)},m(a,h){x(e,a,h),t=!0},p:O,i(a){t||(H(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){$(e,a)}}}function ce(n){let e,t,a,h,d,k=ie()+"",y,f,_,v,w,E,c=n[0],l=[];for(let r=0;r<c.length;r+=1)l[r]=R(I(n,c,r));const m=r=>P(l[r],1,1,()=>{l[r]=null});return{c(){e=b("div"),t=b("h1"),a=T("Leaderboard"),h=S(),d=b("h2"),y=T(k),f=S(),_=b("table"),v=b("tbody");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=p(r,"DIV",{class:!0});var s=g(e);t=p(s,"H1",{class:!0});var o=g(t);a=D(o,"Leaderboard"),o.forEach(u),h=B(s),d=p(s,"H2",{class:!0});var q=g(d);y=D(q,k),q.forEach(u),f=B(s),_=p(s,"TABLE",{class:!0});var Z=g(_);v=p(Z,"TBODY",{});var j=g(v);for(let M=0;M<l.length;M+=1)l[M].l(j);j.forEach(u),Z.forEach(u),s.forEach(u),this.h()},h(){N(t,"class","mx-4 my-4 text-4xl font-bold text-primary"),N(d,"class","mx-4 text-lg font-bold"),N(_,"class","table w-full"),N(e,"class","z-0 w-screen space-y-4 overflow-x-auto font-geologica text-lg text-secondary")},m(r,s){z(r,e,s),i(e,t),i(t,a),i(e,h),i(e,d),i(d,y),i(e,f),i(e,_),i(_,v);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(v,null);E=!0},p(r,[s]){if(s&1){c=r[0];let o;for(o=0;o<c.length;o+=1){const q=I(r,c,o);l[o]?(l[o].p(q,s),H(l[o],1)):(l[o]=R(q),l[o].c(),H(l[o],1),l[o].m(v,null))}for(ee(),o=c.length;o<l.length;o+=1)m(o);G()}},i(r){if(!E){for(let s=0;s<c.length;s+=1)H(l[s]);w||J(()=>{w=te(e,le,{delay:500}),w.start()}),E=!0}},o(r){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)P(l[s]);E=!1},d(r){r&&u(e),K(l,r)}}}function ie(){const n=new Date;let e=n.getHours(),t=n.getMinutes();return e<10&&(e=`0${e}`),t<10&&(t=`0${t}`),"Last updated "+e+":"+t}function fe(n,e,t){let{data:a}=e;const{leaderboard:h}=a;return n.$$set=d=>{"data"in d&&t(1,a=d.data)},[h,a]}class be extends Y{constructor(e){super(),F(this,e,fe,ce,U,{data:1})}}export{be as component,_e as universal};
