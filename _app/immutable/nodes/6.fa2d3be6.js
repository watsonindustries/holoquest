import{S as A,i as H,s as M,k as y,q as v,a as N,l as k,m as g,r as E,h as m,c as S,n as r,b as I,C as l,a2 as D,U as L,R as Y,W,D as $,o as j,N as z,a3 as F}from"../chunks/index.f2e2f952.js";import{s as G}from"../chunks/client.2f60997e.js";import{a as R,n as O}from"../chunks/store.76160239.js";import{T as x}from"../chunks/custom.b03ad683.js";function J(a){let i,p,s,e,o,_,f,t,h,d,T,w,b,U,C,B;return{c(){i=y("h1"),p=v("Settings"),s=N(),e=y("div"),o=y("label"),_=v("Nickname"),f=N(),t=y("input"),h=N(),d=y("button"),T=v("Set nickname"),w=N(),b=y("p"),U=v("Your nickname is used to identify you in the leaderboards and realtime events."),this.h()},l(n){i=k(n,"H1",{class:!0});var c=g(i);p=E(c,"Settings"),c.forEach(m),s=S(n),e=k(n,"DIV",{class:!0});var u=g(e);o=k(u,"LABEL",{class:!0,for:!0});var P=g(o);_=E(P,"Nickname"),P.forEach(m),f=S(u),t=k(u,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),h=S(u),d=k(u,"BUTTON",{class:!0});var V=g(d);T=E(V,"Set nickname"),V.forEach(m),w=S(u),b=k(u,"P",{});var q=g(b);U=E(q,"Your nickname is used to identify you in the leaderboards and realtime events."),q.forEach(m),u.forEach(m),this.h()},h(){r(i,"class","mx-4 my-4 font-geologica text-4xl font-bold text-primary"),r(o,"class","font-geologica text-xl font-bold text-secondary"),r(o,"for","nickname"),r(t,"type","text"),r(t,"id","nickname"),r(t,"name","nickname"),r(t,"placeholder","E.g. smol_ame"),r(t,"class","input-bordered input-secondary input w-full max-w-xs"),r(d,"class","btn-secondary btn rounded-full"),r(e,"class","mx-4 my-4 space-y-4")},m(n,c){I(n,i,c),l(i,p),I(n,s,c),I(n,e,c),l(e,o),l(o,_),l(e,f),l(e,t),D(t,a[1]),l(e,h),l(e,d),l(d,T),l(e,w),l(e,b),l(b,U),C||(B=[L(t,"input",a[2]),L(d,"click",function(){F(a[0])&&a[0].apply(this,arguments)})],C=!0)},p(n,[c]){a=n,c&2&&t.value!==a[1]&&D(t,a[1])},i:Y,o:Y,d(n){n&&m(i),n&&m(s),n&&m(e),C=!1,W(B)}}}function K(a){return a.length>2&&a.length<=20}function Q(a,i,p){let s;$(a,O,f=>p(1,s=f));let e="",o=async()=>{};j(async()=>{e=localStorage.getItem("userToken")||"",p(0,o=async()=>{let t=document.getElementById("nickname").value;if(!K(t)){R({type:x.ERROR,message:"Nickname must be between 3 and 20 characters long"});return}if(z(O,s=t,s),e!==""&&e!==null){const h=await G(e,t);if(h.errors){console.log(h.errors),R({type:x.ERROR,message:"Nickname invalid"});return}R({type:x.SUCCESS,message:"Nickname updated successfully"})}else R({type:x.ERROR,message:"User token not found"})})});function _(){s=this.value,O.set(s)}return[o,s,_]}class ae extends A{constructor(i){super(),H(this,i,Q,J,M,{})}}export{ae as component};
