import{T as it,S as rt,i as ot,s as lt,k as S,q as C,l as y,m as b,r as O,h,n as $,b as N,E as u,u as ut,U as ft,V as Z,a as T,y as F,c as P,z as G,A as J,R as tt,g as V,f as dt,d as Q,N as mt,B as K,W as ht,o as pt,O as _t,P as gt,Q as vt,v as St}from"../chunks/index.82b77fb4.js";import{e as yt}from"../chunks/qr-scanner.min.4880ecae.js";import{s as bt}from"../chunks/crypto.6f6cc81d.js";import{e as $t}from"../chunks/const.96e908ff.js";import{I as et,Q as Et,S as xt}from"../chunks/index.af4913a8.js";function st(c,{delay:t=0,duration:n=400,easing:s=it}={}){const o=+getComputedStyle(c).opacity;return{delay:t,duration:n,easing:s,css:e=>`opacity: ${e*o}`}}function kt(c){let t,n,s,o,e,f,i,g;return{c(){t=S("div"),n=S("div"),s=S("div"),o=S("span"),e=C(c[1]),this.h()},l(p){t=y(p,"DIV",{class:!0});var d=b(t);n=y(d,"DIV",{class:!0});var _=b(n);s=y(_,"DIV",{});var v=b(s);o=y(v,"SPAN",{});var w=b(o);e=O(w,c[1]),w.forEach(h),v.forEach(h),_.forEach(h),d.forEach(h),this.h()},h(){$(n,"class",f="alert alert-"+c[0]),$(t,"class","toast toast-bottom toast-center w-52")},m(p,d){N(p,t,d),u(t,n),u(n,s),u(s,o),u(o,e),g=!0},p(p,[d]){(!g||d&2)&&ut(e,p[1]),(!g||d&1&&f!==(f="alert alert-"+p[0]))&&$(n,"class",f)},i(p){g||(ft(()=>{g&&(i||(i=Z(n,st,{},!0)),i.run(1))}),g=!0)},o(p){i||(i=Z(n,st,{},!1)),i.run(0),g=!1},d(p){p&&h(t),p&&i&&i.end()}}}function It(c,t,n){let{type:s}=t,{message:o}=t;return c.$$set=e=>{"type"in e&&n(0,s=e.type),"message"in e&&n(1,o=e.message)},[s,o]}class wt extends rt{constructor(t){super(),ot(this,t,It,kt,lt,{type:0,message:1})}}function at(c,t,n){const s=c.slice();return s[8]=t[n],s}function nt(c){let t,n;const s=[c[8]];let o={};for(let e=0;e<s.length;e+=1)o=_t(o,s[e]);return t=new wt({props:o}),{c(){F(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,f){J(t,e,f),n=!0},p(e,f){const i=f&2?gt(s,[vt(e[8])]):{};t.$set(i)},i(e){n||(V(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){K(t,e)}}}function Vt(c){let t,n,s,o,e,f,i,g,p,d,_,v,w,U,E,x,j,A,k,R,q,H,L,I=c[1],l=[];for(let a=0;a<I.length;a+=1)l[a]=nt(at(c,I,a));const ct=a=>Q(l[a],1,1,()=>{l[a]=null});return v=new et({props:{src:Et,theme:"solid",class:"color-gray-900 h-8 w-8"}}),x=new et({props:{src:xt,theme:"solid",class:"color-gray-900 h-8 w-8"}}),{c(){t=S("div");for(let a=0;a<l.length;a+=1)l[a].c();n=T(),s=S("div"),o=S("h1"),e=C("Scanner"),f=T(),i=S("p"),g=C("Press Scan, and scan the QR code of the stamp!"),p=T(),d=S("div"),_=S("button"),F(v.$$.fragment),w=C(`
			Scan`),U=T(),E=S("button"),F(x.$$.fragment),j=C(`
			Stop`),A=T(),k=S("div"),R=S("video"),this.h()},l(a){t=y(a,"DIV",{class:!0});var m=b(t);for(let W=0;W<l.length;W+=1)l[W].l(m);m.forEach(h),n=P(a),s=y(a,"DIV",{class:!0});var r=b(s);o=y(r,"H1",{class:!0});var D=b(o);e=O(D,"Scanner"),D.forEach(h),f=P(r),i=y(r,"P",{class:!0});var X=b(i);g=O(X,"Press Scan, and scan the QR code of the stamp!"),X.forEach(h),p=P(r),d=y(r,"DIV",{class:!0});var B=b(d);_=y(B,"BUTTON",{class:!0});var z=b(_);G(v.$$.fragment,z),w=O(z,`
			Scan`),z.forEach(h),U=P(B),E=y(B,"BUTTON",{class:!0});var M=b(E);G(x.$$.fragment,M),j=O(M,`
			Stop`),M.forEach(h),B.forEach(h),A=P(r),k=y(r,"DIV",{id:!0,class:!0});var Y=b(k);R=y(Y,"VIDEO",{}),b(R).forEach(h),Y.forEach(h),r.forEach(h),this.h()},h(){$(t,"class","toast toast-bottom toast-center"),$(o,"class","text-4xl text-center text-primary font-bold"),$(i,"class","text-xl text-center px-2"),$(_,"class","btn btn-primary rounded-full gap-2 w-6/12 mx-auto"),$(E,"class","btn btn-error rounded-full gap-2 w-6/12 mx-auto"),$(d,"class","flex flex-col space-y-4 justify-center"),$(k,"id","scanner-preview-area"),$(k,"class","min-h-screen bg-slate-800"),$(s,"class","space-y-4")},m(a,m){N(a,t,m);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null);N(a,n,m),N(a,s,m),u(s,o),u(o,e),u(s,f),u(s,i),u(i,g),u(s,p),u(s,d),u(d,_),J(v,_,null),u(_,w),u(d,U),u(d,E),J(x,E,null),u(E,j),u(s,A),u(s,k),u(k,R),q=!0,H||(L=[tt(_,"click",c[2]),tt(E,"click",c[3])],H=!0)},p(a,[m]){if(m&2){I=a[1];let r;for(r=0;r<I.length;r+=1){const D=at(a,I,r);l[r]?(l[r].p(D,m),V(l[r],1)):(l[r]=nt(D),l[r].c(),V(l[r],1),l[r].m(t,null))}for(St(),r=I.length;r<l.length;r+=1)ct(r);dt()}},i(a){if(!q){for(let m=0;m<I.length;m+=1)V(l[m]);V(v.$$.fragment,a),V(x.$$.fragment,a),q=!0}},o(a){l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)Q(l[m]);Q(v.$$.fragment,a),Q(x.$$.fragment,a),q=!1},d(a){a&&h(t),mt(l,a),a&&h(n),a&&h(s),K(v),K(x),H=!1,ht(L)}}}function Dt(c,t,n){let s,o,e="",f=[];const i=$t.map(_=>_.hash);function g(_){e=_.data,o.pause();let v=bt(e);i.includes(v)?(localStorage.setItem(v,e),n(1,f=[{type:"success",message:"Stamp Saved!"}])):n(1,f=[{type:"error",message:"Invalid Stamp!"}]),setTimeout(()=>{n(1,f=[])},4e3)}return pt(()=>{s=document.querySelector("video"),n(0,o=new yt(s,g,{highlightScanRegion:!0,highlightCodeOutline:!0}))}),[o,f,()=>o.start(),()=>o.pause()]}class Rt extends rt{constructor(t){super(),ot(this,t,Dt,Vt,lt,{})}}export{Rt as component};
